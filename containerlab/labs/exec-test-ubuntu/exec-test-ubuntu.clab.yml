name: exec-test-ubuntu

topology:
  kinds:
    linux:
      image: networklessons/ubuntu-network-host:26

  nodes:
    host1:
      kind: linux
      exec:
        - ip addr add 192.168.12.1/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.12.254 dev eth1
    host2:
      kind: linux
      exec:
        - ip addr add 192.168.12.2/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.12.254 dev eth1
    host3:
      kind: linux
      exec:
        - ip addr add 192.168.34.3/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.34.254 dev eth1
    host4:
      kind: linux
      exec:
        - ip addr add 192.168.34.4/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.34.254 dev eth1

  links:
    - endpoints: ["host1:eth1", "host2:eth1"]
    - endpoints: ["host2:eth2", "host3:eth1"]
    - endpoints: ["host3:eth2", "host4:eth1"]